<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>HGTI Text → Image</title>

<style>
:root{
  --bg:#F6F1E8;
  --primary:#2FAF9B;
  --text:#1F2A2A;
}

body{
  margin:0;
  padding:20px;
  font-family: system-ui, sans-serif;
  background:var(--bg);
  color:var(--text);
}

textarea{
  width:100%;
  height:160px;
  font-family: monospace;
  padding:12px;
  border-radius:10px;
  border:1px solid #ccc;
}

button{
  margin-top:10px;
  padding:10px 18px;
  border:none;
  border-radius:10px;
  background:var(--primary);
  color:white;
  font-size:1rem;
  cursor:pointer;
}

canvas{
  display:block;
  margin-top:20px;
  border:1px solid #999;
  image-rendering: pixelated;
}
</style>
</head>

<body>

<h2>TXT / HGTI → Görsel</h2>

<textarea id="input">
0,0=#FF0000
1,0=#00FF00
2,0=#0000FF
0,1=#000000
1,1=#000000
2,1=#000000
</textarea>

<button onclick="render()">Görsele Dönüştür</button>

<canvas id="canvas"></canvas>

<script>
const pixelSize = 20;

function render(){
  const text = document.getElementById("input").value;
  const canvas = document.getElementById("canvas");
  const ctx = canvas.getContext("2d");

  const lines = text.split("\n");

  // Canvas boyutunu otomatik hesapla
  let maxX = 0, maxY = 0;
  for(const line of lines){
    if(!line.includes("=")) continue;
    const [pos] = line.split("=");
    const [x,y] = pos.split(",").map(Number);
    maxX = Math.max(maxX, x);
    maxY = Math.max(maxY, y);
  }

  canvas.width  = (maxX + 1) * pixelSize;
  canvas.height = (maxY + 1) * pixelSize;

  // arka plan
  ctx.fillStyle = "#ffffff";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // pikseller
  for(const line of lines){
    if(!line.includes("=")) continue;

    const [pos, color] = line.trim().split("=");
    const [x,y] = pos.split(",").map(Number);

    ctx.fillStyle = color;
    ctx.fillRect(
      x * pixelSize,
      y * pixelSize,
      pixelSize,
      pixelSize
    );
  }
}
</script>

</body>
</html>
