<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>HGTI Studio</title>

<style>
:root{
  --bg:#F6F1E8;
  --primary:#2FAF9B;
  --text:#1F2A2A;
}

body{
  margin:0;
  padding:24px;
  font-family: system-ui, sans-serif;
  background:var(--bg);
  color:var(--text);
}

header{
  display:flex;
  align-items:center;
  gap:16px;
  margin-bottom:20px;
}

header img{
  height:56px;
}

textarea{
  width:100%;
  height:160px;
  font-family: monospace;
  padding:12px;
  border-radius:10px;
  border:1px solid #ccc;
}

button{
  margin:8px 8px 8px 0;
  padding:10px 18px;
  border:none;
  border-radius:10px;
  background:var(--primary);
  color:white;
  font-size:1rem;
  cursor:pointer;
}

canvas{
  display:block;
  margin-top:20px;
  border:1px solid #999;
  image-rendering: pixelated;
}
</style>
</head>

<body>

<header>
  <img src="logo.png" alt="Henry Games">
  <h1>HGTI Studio</h1>
</header>

<h3>TXT / HGTI → Görsel</h3>

<input type="file" id="txtFile" accept=".txt,.hgti">
<br>
<button onclick="fileToImage()">Dosyadan Görsel</button>

<textarea id="textInput" placeholder="İstersen küçük dosyalar için buraya da yapıştırabilirsin"></textarea>

<button onclick="textToImage()">Metinden Görsel</button>

<canvas id="canvas"></canvas>

<script>
const pixelSize = 10;

function parseAndDraw(text){
  const canvas = document.getElementById("canvas");
  const ctx = canvas.getContext("2d");
  const lines = text.split("\n");

  let maxX = 0, maxY = 0;
  for(const l of lines){
    if(!l.includes("=")) continue;
    const [p] = l.split("=");
    const [x,y] = p.split(",").map(Number);
    maxX = Math.max(maxX, x);
    maxY = Math.max(maxY, y);
  }

  canvas.width = (maxX + 1) * pixelSize;
  canvas.height = (maxY + 1) * pixelSize;

  ctx.fillStyle = "#ffffff";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  for(const l of lines){
    if(!l.includes("=")) continue;
    const [p,c] = l.split("=");
    const [x,y] = p.split(",").map(Number);
    ctx.fillStyle = c;
    ctx.fillRect(
      x * pixelSize,
      y * pixelSize,
      pixelSize,
      pixelSize
    );
  }
}

function textToImage(){
  const text = document.getElementById("textInput").value;
  if(text.trim()) parseAndDraw(text);
}

function fileToImage(){
  const file = document.getElementById("txtFile").files[0];
  if(!file) return;

  const reader = new FileReader();
  reader.onload = () => {
    parseAndDraw(reader.result);
  };
  reader.readAsText(file);
}
</script>

</body>
</html>
